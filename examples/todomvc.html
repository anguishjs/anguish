<!doctype html>
<html lang="en">
  <script src="../src/index.ts" type="module" defer></script>

  <body x-data="{
    addItem(title) {
      if (!title) return
      $refs.todos.append(item({ title, completed: false }))
    },
    get itemsLeft() {
      return [...$refs.todos.children]
        .filter(e => !e.$data.completed)
        .length
    },
  }">
    <h1>todos</h1>

    <input autofocus @change="addItem(value.trim()); value = ''">

    <ul x-ref="todos">
      <template x-name="item">
        <li :class="{ completed }">
          <input type="checkbox" x-model="completed">
          <input type="text" x-model="title">
          <button @click="$unmount">x</button>
        </li>
      </template>
    </ul>

    <footer x-text="`${itemsLeft} items left`"></footer>
  </body>
</html>
