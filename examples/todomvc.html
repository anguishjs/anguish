<!DOCTYPE html>
<html lang="en">
  <script src="../src/index.ts" type="module" defer></script>
  <script>
    const todoApp = () => ({
      addItem(title) {
        if (!title) return;
        this.$refs.todos.append(item({ title, completed: false }));
      },
      get itemsLeft() {
        return Array.from(this.$refs.todos.children)
          .filter((el) => !el.$data.completed)
          .length;
      },
    });
  </script>

  <body x-data="todoApp()">
    <h1>todos</h1>

    <input
      type="text"
      autofocus
      @change="addItem($el.value.trim()); $el.value = ''"
    />

    <ul x-ref="todos">
      <template x-name="item">
        <li :class="{ completed }">
          <input type="checkbox" x-model="completed" />
          <input type="text" x-model="title" />
          <button @click="$unmount()">x</button>
        </li>
      </template>
    </ul>

    <footer x-text="`${itemsLeft} items left`"></footer>
  </body>
</html>
